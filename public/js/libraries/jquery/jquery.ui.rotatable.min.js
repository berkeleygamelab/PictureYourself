(function(f,c){f.widget("ui.rotatable",f.ui.mouse,{options:{handle:false},handle:function(m){if(m===c){return this.options.handle}this.options.handle=m},_create:function(){if(!this.options.handle){this.options.handle=f(document.createElement("div"))}var m=this.options.handle;m.addClass("ui-rotatable-handle");m.draggable({helper:"clone",start:k});m.on("mousedown",i);m.appendTo(this.element);this.element.data("angle",0)}});var j,e,g;f(document).on("mouseup",l);function a(o){var m=h(o);var p=m.left+o.width()/2;var n=m.top+o.height()/2;return Array(p,n)}function h(m){d(m,0);var n=m.offset();d(m,m.data("angle"));return n}function d(m,n){m.css("transform","rotate("+n+"rad)");m.css("-moz-transform","rotate("+n+"rad)");m.css("-webkit-transform","rotate("+n+"rad)");m.css("-o-transform","rotate("+n+"rad)")}function k(m){if(j){return false}}function b(q){if(!j){return false}var m=a(j);var p=q.pageX-m[0];var r=q.pageY-m[1];var n=Math.atan2(r,p);var o=n-e+g;d(j,o);j.data("angle",o);return false}function i(o){j=f(this).parent();var m=a(j);var n=o.pageX-m[0];var p=o.pageY-m[1];e=Math.atan2(p,n);g=j.data("angle");f(document).on("mousemove",b);return false}function l(m){if(!j){return}f(document).unbind("mousemove");setTimeout(function(){j=false},10);return false}})(jQuery);
/*!
 * jQuery UI Touch Punch 0.2.2
 *
 * Copyright 2011, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */
(function(b){b.support.touch="ontouchend" in document;if(!b.support.touch){return}var c=b.ui.mouse.prototype,e=c._mouseInit,a;function d(g,h){if(g.originalEvent.touches.length>1){return}g.preventDefault();var i=g.originalEvent.changedTouches[0],f=document.createEvent("MouseEvents");f.initMouseEvent(h,true,true,window,1,i.screenX,i.screenY,i.clientX,i.clientY,false,false,false,false,0,null);g.target.dispatchEvent(f)}c._touchStart=function(g){var f=this;if(a||!f._mouseCapture(g.originalEvent.changedTouches[0])){return}a=true;f._touchMoved=false;d(g,"mouseover");d(g,"mousemove");d(g,"mousedown")};c._touchMove=function(f){if(!a){return}this._touchMoved=true;d(f,"mousemove")};c._touchEnd=function(f){if(!a){return}d(f,"mouseup");d(f,"mouseout");if(!this._touchMoved){d(f,"click")}a=false};c._mouseInit=function(){var f=this;f.element.bind("touchstart",b.proxy(f,"_touchStart")).bind("touchmove",b.proxy(f,"_touchMove")).bind("touchend",b.proxy(f,"_touchEnd"));e.call(f)}})(jQuery);(function(f){f.support.touch="ontouchend" in document;if(!f.support.touch){return}var j=f.ui.mouse.prototype,h=j._mouseInit,g;function i(c,b){if(c.originalEvent.touches.length>1){return}c.preventDefault();var a=c.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,true,true,window,1,a.screenX,a.screenY,a.clientX,a.clientY,false,false,false,false,0,null);c.target.dispatchEvent(d)}j._touchStart=function(a){var b=this;if(g||!b._mouseCapture(a.originalEvent.changedTouches[0])){return}g=true;b._touchMoved=false;i(a,"mouseover");i(a,"mousemove");i(a,"mousedown")};j._touchMove=function(a){if(!g){return}this._touchMoved=true;i(a,"mousemove")};j._touchEnd=function(a){if(!g){return}i(a,"mouseup");i(a,"mouseout");if(!this._touchMoved){i(a,"click")}g=false};j._mouseInit=function(){var a=this;a.element.bind("touchstart",f.proxy(a,"_touchStart")).bind("touchmove",f.proxy(a,"_touchMove")).bind("touchend",f.proxy(a,"_touchEnd"));h.call(a)}})(jQuery);