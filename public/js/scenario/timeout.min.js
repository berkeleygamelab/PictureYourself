$.sessionTimeout=function(e){var f={message:"Your session is about to expire.",keepAliveUrl:"/selfie",redirUrl:"/",logoutUrl:"/",warnAfter:180000,redirAfter:60000};var g=f,c,a;if(e){g=$.extend(f,e)}$("body").append('<div title="" id="sessionTimeout-dialog">'+g.message+"</div>");$("#sessionTimeout-dialog").dialog({autoOpen:false,width:325,height:250,modal:true,closeOnEscape:false,open:function(){$(".ui-dialog-titlebar-close").hide()},buttons:{FINISH:function(){window.location=g.logoutUrl},STAY:function(){$(this).dialog("close");$.ajax({type:"GET",url:g.keepAliveUrl});b("stop");d("start")}}});$(document).bind("click keypress",function(){b("stop");d("stop");d("start")});function d(h){switch(h){case"start":c=setTimeout(function(){$("#sessionTimeout-dialog").dialog("open");b("start")},g.warnAfter);break;case"stop":clearTimeout(c);break}}function b(h){switch(h){case"start":a=setTimeout(function(){window.location=g.redirUrl},g.redirAfter-g.warnAfter);break;case"stop":clearTimeout(a);break}}d("start")};$(document).ready(function(){$.sessionTimeout({warnAfter:100000,redirAfter:300000})});