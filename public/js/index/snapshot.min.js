function SnapshotCtrl(k,f,j,d){var h="up";var m=getCookie(pyuseridtag);checkCookie(m);var c=document.querySelector("canvas");var l=c.getContext("2d");var a=document.querySelector("video");var e;var g=document.querySelector("#button");k.pyuserid=getCookie(pyuseridtag);k.camera=false;k.show_camera=true;k.show_capture=false;k.camera_loaded=false;k.loading=false;k.cutDisabled=false;k.snapshot_button={start:true,snap_it:false,cut:false,retake:false};var b=new Image();k.retake=function(){k.snapshot_button.retake=false;k.snapshot_button.snap_it=true;k.snapshot_button.cut=false;k.show_camera=true;k.show_capture=false;k.loading=false;width=0;height=0};k.cut=function(){var p=e.getSelectionRectangle().getOpenCVXYWH();console.log(p);var o={};var n=k.pyuserid+"/1.png";o.filename=n;o.coords=p.x+" "+p.y+" "+p.width+" "+p.height;console.log(o.coords);o.pyuserid=k.pyuserid;$.ajax({url:"/grabcut",type:"POST",data:o,success:function(){window.location="/scenario"},error:function(){k.loading=false;k.cutDisabled=true;alert("There was an issue cropping the image.")}})};k.send_snapshot=function(){i($("#snapshot").attr("src"))};k.get_camera=function(){k.camera=getUserMedia();k.snapshot_button.start=false;k.snapshot_button.snap_it=true;k.camera_loaded=true};k.capture=function(){l.drawImage(a,0,0);k.show_camera=false;k.show_capture=true;i(c.toDataURL("image/png"));k.snapshot_button.cut=true;k.snapshot_button.snap_it=false};k.upload_webcam=function(){if(e.getSelectionRectangle()){k.loading=true;k.cutDisabled=true;var n=k.pyuserid;var o={name:n,data:c.toDataURL("image/png")};$.ajax({url:"/fileupload",type:"POST",data:o,success:function(){k.cut()},error:function(){k.loading=false;k.cutDisabled=true;alert("There was an issue uploading the image.")}})}};var i=function(n){b.src=n;b.onload=function(){e=new CropJS({cropEdges:new EdgeList({topY:160,bottomY:320,leftX:213,rightX:426,}),image:b,imageContainerID:"container",});$("#container").addClass("animated fadeInUp")}}}app.directive("ngFileSelect",function(){return{link:function(a,b){b.bind("change",function(c){a.file=(c.srcElement||c.target).files[0];a.getFile()})}}});function debug(a){if(debug_flag){console.log(a)}}SnapshotCtrl.$inject=["$scope","fileReader","$http","$timeout"];